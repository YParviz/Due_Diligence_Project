{"ast":null,"code":"import{useState,useEffect}from\"react\";import{useNavigate,Link}from\"react-router-dom\";import axios from'axios';import User from\"../images/user.png\";import Cadena from\"../images/cadena.png\";import EyeIcon from\"../images/eye-icon.png\";import EyeSlashIcon from\"../images/eye-slash-icon.png\";import\"./styles/login.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[userLogin,setUserLogin]=useState({usr:\"\",pwd:\"\"});const[rememberMe,setRememberMe]=useState(false);const navigate=useNavigate();const[error,setError]=useState(\"\");const[showPassword,setShowPassword]=useState(false);const[loading,setLoading]=useState(true);const[loginPageLoaded,setLoginPageLoaded]=useState(false);useEffect(()=>{const fetchLoginPage=async()=>{try{await axios.get('http://127.0.0.1:8000/login/');setLoginPageLoaded(true);}catch(error){console.error('Error loading login page:',error);}finally{setLoading(false);}};fetchLoginPage();},[]);const handleChange=e=>{const{name,value}=e.target;setUserLogin({...userLogin,[name]:value});};const togglePasswordVisibility=()=>{setShowPassword(prevShowPassword=>!prevShowPassword);};const handleSubmit=async e=>{e.preventDefault();if(!userLogin.usr||!userLogin.pwd){setError(\"Username and password are required\");return;}const data={username:userLogin.usr,password:userLogin.pwd};try{const response=await axios.post('http://127.0.0.1:8000/api/login/',data);const{token}=response.data;if(rememberMe){localStorage.setItem(\"token\",token);}else{sessionStorage.setItem(\"token\",token);}navigate(\"/Home\");}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'An error occurred');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(!loginPageLoaded){return/*#__PURE__*/_jsx(\"div\",{children:\"Error loading login page\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"loginDiv\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"welcomeTitle\",children:\"welcome\"}),error&&/*#__PURE__*/_jsx(\"div\",{children:error}),/*#__PURE__*/_jsxs(\"span\",{className:\"inputWithIcon\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"usr\",placeholder:\"Username\",onChange:handleChange}),/*#__PURE__*/_jsx(\"img\",{src:User,alt:\"usr\",className:\"icon userIcon\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"inputWithIcon\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",name:\"pwd\",placeholder:\"Password\",onChange:handleChange}),/*#__PURE__*/_jsx(\"img\",{src:showPassword?EyeSlashIcon:EyeIcon,alt:\"Toggle Password Visibility\",className:\"icon eyeIcon \".concat(showPassword?\"rightIcon\":\"\"),onClick:togglePasswordVisibility}),/*#__PURE__*/_jsx(\"img\",{src:Cadena,alt:\"pwd\",className:\"icon cadenaIcon \".concat(showPassword?\"\":\"leftIcon\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"options\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rememberMe\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"rememberMe\",name:\"rememberMe\",checked:rememberMe,onChange:()=>setRememberMe(!rememberMe)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rememberMe\",children:\"Remember me\"})]}),/*#__PURE__*/_jsx(Link,{className:\"forgot\",to:\"/forgot-password\",children:\"Forgot password?\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonGroup\",children:[/*#__PURE__*/_jsx(\"button\",{children:\"Login\"}),/*#__PURE__*/_jsx(Link,{className:\"signup\",to:\"/signup\",children:\"Sign up\"})]})]})});}export default Login;","map":{"version":3,"names":["useState","useEffect","useNavigate","Link","axios","User","Cadena","EyeIcon","EyeSlashIcon","jsx","_jsx","jsxs","_jsxs","Login","userLogin","setUserLogin","usr","pwd","rememberMe","setRememberMe","navigate","error","setError","showPassword","setShowPassword","loading","setLoading","loginPageLoaded","setLoginPageLoaded","fetchLoginPage","get","console","handleChange","e","name","value","target","togglePasswordVisibility","prevShowPassword","handleSubmit","preventDefault","data","username","password","response","post","token","localStorage","setItem","sessionStorage","_error$response","_error$response$data","children","className","onSubmit","type","placeholder","onChange","src","alt","concat","onClick","id","checked","htmlFor","to"],"sources":["C:/Users/Miskinyar/Documents/ProjetY/frontend/src/components/login.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport User from \"../images/user.png\";\r\nimport Cadena from \"../images/cadena.png\";\r\nimport EyeIcon from \"../images/eye-icon.png\";\r\nimport EyeSlashIcon from \"../images/eye-slash-icon.png\";\r\nimport \"./styles/login.css\";\r\n\r\nfunction Login() {\r\n  const [userLogin, setUserLogin] = useState({\r\n    usr: \"\",\r\n    pwd: \"\",\r\n  });\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n  const navigate = useNavigate();\r\n  const [error, setError] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [loginPageLoaded, setLoginPageLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchLoginPage = async () => {\r\n      try {\r\n        await axios.get('http://127.0.0.1:8000/login/');\r\n        setLoginPageLoaded(true);\r\n      } catch (error) {\r\n        console.error('Error loading login page:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchLoginPage();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setUserLogin({\r\n      ...userLogin,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const togglePasswordVisibility = () => {\r\n    setShowPassword((prevShowPassword) => !prevShowPassword);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!userLogin.usr || !userLogin.pwd) {\r\n      setError(\"Username and password are required\");\r\n      return;\r\n    }\r\n    \r\n    const data = {\r\n      username: userLogin.usr,\r\n      password: userLogin.pwd,\r\n    };\r\n    \r\n    try {\r\n      const response = await axios.post('http://127.0.0.1:8000/api/login/', data);\r\n      const { token } = response.data;\r\n      if (rememberMe) {\r\n        localStorage.setItem(\"token\", token);\r\n      } else {\r\n        sessionStorage.setItem(\"token\", token);\r\n      }\r\n      navigate(\"/Home\");\r\n    } catch (error) {\r\n      setError(error.response?.data?.error || 'An error occurred');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  if (!loginPageLoaded) {\r\n    return <div>Error loading login page</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"loginDiv\">\r\n      <form onSubmit={handleSubmit}>\r\n        <h1 className=\"welcomeTitle\">welcome</h1>\r\n        {error && <div>{error}</div>}\r\n        <span className=\"inputWithIcon\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"usr\"\r\n            placeholder=\"Username\"\r\n            onChange={handleChange}\r\n          />\r\n          <img src={User} alt=\"usr\" className=\"icon userIcon\" />\r\n        </span>\r\n\r\n        <br />\r\n        <span className=\"inputWithIcon\">\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            name=\"pwd\"\r\n            placeholder=\"Password\"\r\n            onChange={handleChange}\r\n          />\r\n          <img\r\n            src={showPassword ? EyeSlashIcon : EyeIcon}\r\n            alt=\"Toggle Password Visibility\"\r\n            className={`icon eyeIcon ${showPassword ? \"rightIcon\" : \"\"}`}\r\n            onClick={togglePasswordVisibility}\r\n          />\r\n          <img src={Cadena} alt=\"pwd\" className={`icon cadenaIcon ${showPassword ? \"\" : \"leftIcon\"}`} />\r\n        </span>\r\n\r\n        <div className=\"options\">\r\n          <div className=\"rememberMe\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"rememberMe\"\r\n              name=\"rememberMe\"\r\n              checked={rememberMe}\r\n              onChange={() => setRememberMe(!rememberMe)}\r\n            />\r\n            <label htmlFor=\"rememberMe\">Remember me</label>\r\n          </div>\r\n          <Link className=\"forgot\" to=\"/forgot-password\">Forgot password?</Link>\r\n        </div>\r\n\r\n        <br />\r\n        <div className=\"buttonGroup\">\r\n          <button>Login</button>\r\n          <Link className=\"signup\" to={\"/signup\"}>\r\n            Sign up\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}