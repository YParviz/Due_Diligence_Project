{"ast":null,"code":"import'./styles/signupForm.css';import{useState}from'react';import{useNavigate,Link}from'react-router-dom';import{useAuth}from'../context/authContext.jsx';import CryptoJS from'crypto-js';import EyeIcon from'../images/eye-icon.png';import EyeSlashIcon from'../images/eye-slash-icon.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(){const[userRegister,setUserRegister]=useState({usr:\"\",email:\"\",pwd:\"\",pwd2:\"\",company:\"\"});const{signup,login,loading}=useAuth();const navigate=useNavigate();const[error,setError]=useState(\"\");const[showPassword,setShowPassword]=useState(false);const handleChange=e=>{const{name,value}=e.target;setUserRegister(prev=>({...prev,[name]:value}));if(name===\"pwd2\"&&value!==userRegister.pwd){setError(\"Passwords don't match\");}else if((name===\"pwd\"||name===\"pwd2\")&&value.length<8){setError(\"Password must be at least 8 characters long\");}else if(name===\"company\"&&value.length<3){setError(\"Company name must be at least 3 characters long\");}else if(name===\"usr\"&&value.length<3){setError(\"Username must be at least 3 characters long\");}else if(name===\"email\"&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(value)){setError(\"Invalid email address\");}else{setError(\"\");}};const handleSubmit=async e=>{e.preventDefault();if(!userRegister.company||!userRegister.usr||!userRegister.pwd||!userRegister.email){setError(\"All fields are required\");return;}if(userRegister.pwd!==userRegister.pwd2){setError(\"Passwords don't match\");return;}const pwd=CryptoJS.enc.Base64.stringify(CryptoJS.SHA256(userRegister.pwd));const data={username:userRegister.usr,email:userRegister.email,password:pwd,company:userRegister.company};try{await signup(data);await login({username:userRegister.usr,password:pwd});navigate('/projects');}catch(error){if(error.message==='Username already exists'){setError('Username already exists');}else if(error.message==='Invalid email address'){setError('Invalid email address');}else{setError('Signup failed');}}};const togglePasswordVisibility=()=>{setShowPassword(prevShowPassword=>!prevShowPassword);};return/*#__PURE__*/_jsx(\"div\",{className:\"signupForm\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"createAccountTitle\",children:\"Create an account\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"company\",placeholder:\"Company name\",className:\"textInput\",required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"usr\",placeholder:\"Username\",className:\"textInput\",required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",className:\"textInput\",required:true,onChange:handleChange})}),/*#__PURE__*/_jsxs(\"span\",{className:\"inputWithIcon\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",name:\"pwd\",placeholder:\"Password\",className:\"textInput\",required:true,onChange:handleChange}),/*#__PURE__*/_jsx(\"img\",{src:showPassword?EyeSlashIcon:EyeIcon,alt:\"Toggle Password Visibility\",className:\"icon eyeIcon \".concat(showPassword?\"rightIcon\":\"\"),onClick:togglePasswordVisibility})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"inputWithIcon\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",name:\"pwd2\",placeholder:\"Confirm Password\",className:\"textInput\",required:true,onChange:handleChange}),/*#__PURE__*/_jsx(\"img\",{src:showPassword?EyeSlashIcon:EyeIcon,alt:\"Toggle Password Visibility\",className:\"icon eyeIcon \".concat(showPassword?\"rightIcon\":\"\"),onClick:togglePasswordVisibility})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonContainer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:\"Sign up\"}),/*#__PURE__*/_jsx(Link,{className:\"signin signup\",to:'/',children:\"Sign in\"})]})]})});}export default Signup;","map":{"version":3,"names":["useState","useNavigate","Link","useAuth","CryptoJS","EyeIcon","EyeSlashIcon","jsx","_jsx","jsxs","_jsxs","Signup","userRegister","setUserRegister","usr","email","pwd","pwd2","company","signup","login","loading","navigate","error","setError","showPassword","setShowPassword","handleChange","e","name","value","target","prev","length","test","handleSubmit","preventDefault","enc","Base64","stringify","SHA256","data","username","password","message","togglePasswordVisibility","prevShowPassword","className","children","onSubmit","type","placeholder","required","onChange","src","alt","concat","onClick","disabled","to"],"sources":["C:/Users/Miskinyar/Documents/ProjetY/frontend/src/components/signup.jsx"],"sourcesContent":["import './styles/signupForm.css';\r\nimport { useState } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { useAuth } from '../context/authContext.jsx';\r\nimport CryptoJS from 'crypto-js';\r\nimport EyeIcon from '../images/eye-icon.png';\r\nimport EyeSlashIcon from '../images/eye-slash-icon.png';\r\n\r\nfunction Signup() {\r\n    const [userRegister, setUserRegister] = useState({\r\n        usr: \"\",\r\n        email: \"\",\r\n        pwd: \"\",\r\n        pwd2: \"\",\r\n        company: \"\",\r\n    });\r\n    const { signup, login, loading } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [error, setError] = useState(\"\");\r\n    const [showPassword, setShowPassword] = useState(false);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setUserRegister((prev) => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n\r\n        if (name === \"pwd2\" && value !== userRegister.pwd) {\r\n            setError(\"Passwords don't match\");\r\n        } else if ((name === \"pwd\" || name === \"pwd2\") && value.length < 8) {\r\n            setError(\"Password must be at least 8 characters long\");\r\n        } else if (name === \"company\" && value.length < 3) {\r\n            setError(\"Company name must be at least 3 characters long\");\r\n        } else if (name === \"usr\" && value.length < 3) {\r\n            setError(\"Username must be at least 3 characters long\");\r\n        } else if (name === \"email\" && !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(value)) {\r\n            setError(\"Invalid email address\");\r\n        } else {\r\n            setError(\"\");\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!userRegister.company || !userRegister.usr || !userRegister.pwd || !userRegister.email) {\r\n            setError(\"All fields are required\");\r\n            return;\r\n        }\r\n        if (userRegister.pwd !== userRegister.pwd2) {\r\n            setError(\"Passwords don't match\");\r\n            return;\r\n        }\r\n        const pwd = CryptoJS.enc.Base64.stringify(CryptoJS.SHA256(userRegister.pwd));\r\n        const data = {\r\n            username: userRegister.usr,\r\n            email: userRegister.email,\r\n            password: pwd,\r\n            company: userRegister.company,\r\n        };\r\n        try {\r\n            await signup(data);\r\n            await login({ username: userRegister.usr, password: pwd });\r\n            navigate('/projects');\r\n        } catch (error) {\r\n            if (error.message === 'Username already exists') {\r\n                setError('Username already exists');\r\n            } else if (error.message === 'Invalid email address') {\r\n                setError('Invalid email address');\r\n            } else {\r\n                setError('Signup failed');\r\n            }\r\n        }\r\n    };\r\n    \r\n    const togglePasswordVisibility = () => {\r\n        setShowPassword((prevShowPassword) => !prevShowPassword);\r\n    };\r\n\r\n    return (\r\n        <div className='signupForm'>\r\n            <form onSubmit={handleSubmit}>\r\n                <h1 className=\"createAccountTitle\">Create an account</h1>\r\n                {error && <div className=\"error\">{error}</div>}\r\n                <span>\r\n                    <input type=\"text\" name=\"company\" placeholder=\"Company name\" className=\"textInput\" required onChange={handleChange} />\r\n                </span>\r\n                <span>\r\n                    <input type=\"text\" name=\"usr\" placeholder=\"Username\" className=\"textInput\" required onChange={handleChange} />\r\n                </span>\r\n                <span>\r\n                    <input type=\"email\" name=\"email\" placeholder=\"Email\" className=\"textInput\" required onChange={handleChange} />\r\n                </span>\r\n                <span className=\"inputWithIcon\">\r\n                    <input type={showPassword ? \"text\" : \"password\"} name=\"pwd\" placeholder=\"Password\" className=\"textInput\" required onChange={handleChange} />\r\n                    <img src={showPassword ? EyeSlashIcon : EyeIcon} alt=\"Toggle Password Visibility\" className={`icon eyeIcon ${showPassword ? \"rightIcon\" : \"\"}`} onClick={togglePasswordVisibility} />\r\n                </span>\r\n                <span className=\"inputWithIcon\">\r\n                    <input type={showPassword ? \"text\" : \"password\"} name=\"pwd2\" placeholder=\"Confirm Password\" className=\"textInput\" required onChange={handleChange} />\r\n                    <img src={showPassword ? EyeSlashIcon : EyeIcon} alt=\"Toggle Password Visibility\" className={`icon eyeIcon ${showPassword ? \"rightIcon\" : \"\"}`} onClick={togglePasswordVisibility} />\r\n                </span>\r\n                <div className=\"buttonContainer\">\r\n                    <button type=\"submit\" disabled={loading}>Sign up</button>\r\n                    <Link className='signin signup' to={'/'}>Sign in</Link>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Signup;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}