{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import'./styles/validateUser.css';// Assurez-vous de créer et d'importer le fichier CSS\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ValidateUser(){const{userId}=useParams();const navigate=useNavigate();const[companyName,setCompanyName]=useState('');const[username,setUsername]=useState('');const[validationStatus,setValidationStatus]=useState(null);useEffect(()=>{async function fetchUserData(){try{const response=await axios.get(\"http://localhost:8000/api/user-details/\".concat(userId,\"/\"));const userData=response.data;setCompanyName(userData.company);setUsername(userData.username);}catch(error){console.error('Error fetching user data:',error);}}fetchUserData();},[userId]);const handleValidation=async isValidated=>{try{if(userId){const response=await axios.patch(\"http://127.0.0.1:8000/api/validate/\".concat(userId,\"/\"),{is_validated:isValidated});if(isValidated){setValidationStatus('Accepted');console.log('User accepted successfully');navigate('/users');// Redirection après l'acceptation\n}else{const deleteResponse=await axios.delete(\"http://127.0.0.1:8000/api/validate/\".concat(userId,\"/\"));console.log('User deleted successfully');navigate('/users');// Redirection après le rejet\n}}else{console.error('Error: userId is undefined');}}catch(error){console.error('Error updating validation status:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"validation-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"New request\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Company Name:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-input\",children:companyName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-input\",children:username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"accept-button\",onClick:()=>handleValidation(true),children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{className:\"reject-button\",onClick:()=>handleValidation(false),children:\"Reject\"})]})]})]});}export default ValidateUser;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","ValidateUser","userId","navigate","companyName","setCompanyName","username","setUsername","validationStatus","setValidationStatus","fetchUserData","response","get","concat","userData","data","company","error","console","handleValidation","isValidated","patch","is_validated","log","deleteResponse","delete","className","children","onClick"],"sources":["C:/Users/Miskinyar/Documents/ProjetY/frontend/src/components/ValidateUser.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './styles/validateUser.css'; // Assurez-vous de créer et d'importer le fichier CSS\r\n\r\nfunction ValidateUser() {\r\n    const { userId } = useParams();\r\n    const navigate = useNavigate();\r\n    const [companyName, setCompanyName] = useState('');\r\n    const [username, setUsername] = useState('');\r\n    const [validationStatus, setValidationStatus] = useState(null);\r\n\r\n    useEffect(() => {\r\n        async function fetchUserData() {\r\n            try {\r\n                const response = await axios.get(`http://localhost:8000/api/user-details/${userId}/`);\r\n                const userData = response.data;\r\n                setCompanyName(userData.company);\r\n                setUsername(userData.username);\r\n            } catch (error) {\r\n                console.error('Error fetching user data:', error);\r\n            }\r\n        }\r\n        fetchUserData();\r\n    }, [userId]);\r\n\r\n    const handleValidation = async (isValidated) => {\r\n        try {\r\n            if (userId) {\r\n                const response = await axios.patch(`http://127.0.0.1:8000/api/validate/${userId}/`, { is_validated: isValidated });\r\n                if (isValidated) {\r\n                    setValidationStatus('Accepted');\r\n                    console.log('User accepted successfully');\r\n                    navigate('/users');  // Redirection après l'acceptation\r\n                } else {\r\n                    const deleteResponse = await axios.delete(`http://127.0.0.1:8000/api/validate/${userId}/`);\r\n                    console.log('User deleted successfully');\r\n                    navigate('/users');  // Redirection après le rejet\r\n                }\r\n            } else {\r\n                console.error('Error: userId is undefined');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating validation status:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"validation-container\">\r\n            <h1 className=\"title\">New request</h1>\r\n            <div className=\"form-container\">\r\n                <div className=\"form-group\">\r\n                    <label>Company Name:</label>\r\n                    <div className=\"form-input\">{companyName}</div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Username:</label>\r\n                    <div className=\"form-input\">{username}</div>\r\n                </div>\r\n                <div className=\"button-container\">\r\n                    <button className=\"accept-button\" onClick={() => handleValidation(true)}>Accept</button>\r\n                    <button className=\"reject-button\" onClick={() => handleValidation(false)}>Reject</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ValidateUser;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}